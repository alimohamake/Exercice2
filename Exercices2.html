<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercice 1 </title>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center-left;
        }

        #exerciseur {
            margin: 50px;
            padding: 20px;
            border: 2px solid #ccc;
            border-radius: 5px;
            width: 1000px;
			height: 285px;
        }

        #reponse,
        #correction {
            font-size: 18px;
            margin-top: 10px;
        }
		#auteur {
            position: absolute;
            bottom: 10px;
            right: 200px;
			color: red;
			font-weight: bold;
			text-decoration: underline;
			font-style: italic;
        }
    </style>
</head>

<body>
    <img src="C:\Users\S\Desktop\Projet8J\image.jpg" alt="" style="width:15%">
	<h1>Déterminer la forme algébrique d'un nombre complexe</h1>
    <div id="exerciseur">
        <p>Déterminer la forme algébrique du nombre complexe suivant : <span id="expression"></span></p>
        <p> z = <input type="text" id="userAnswer" placeholder="Votre réponse">
        <button onclick="checkAnswer()">Calculer</button>
        <p id="reponse"></p>
        <p id="correction"></p>
        <button onclick="changeStatement()">Changer l'énoncé</button>
		<p id="auteur">M. ALI MOHAMAKE </p>
    </div>
    <script>
        var A, B, a, b, c, d, e, Z, Detail, Detailb, verifie, expression, resultat, resultatb, reponse, x, y, v, numreel, numimg, deno, numreelav, numimgav, denoav, sreel, simag, denoreel, denoimg, partireel, partimaginaire, verifieb, verifiec;

        function enoncexercice() {
            A = Math.floor(Math.random() * 3 + 1);
            B = Math.floor(Math.random() * 10 + 1);
            a = Math.floor(Math.random() * 4 + 1);
            b = Math.floor(Math.random() * 4 + 1);
            c = Math.floor(Math.random() * 4 + 1);
            d = Math.floor(Math.random() * 4 + 1);
            e = Math.floor(Math.random() * 4 + 1);
			v = -b*c+e;

            if (B === 1) {
                    if (b === 1 && d !== 1) {
                        e = e + 1;
                        Z = `\\(z = ${a}+i(${c}+${d}i)+${e}i\\)`;
                        Detail = `\\(z = ${a}+i(${c}+${d}i)+${e}i = ${a}+i \\times {${c}}+i \\times {${d}i+${e}i} = ${a}+${c}i+${d}\\times {i^{2}}+${e}i = ${a}+${c}i-${d}+${e}i\\)`;
						Detailb = `\\(=${a}-${d}+i(${c}+${e}) =${a-d}+${c + e}i\\)`;
                        x = a - d;
                        y = c + e;
                        verifie = `${x}+${y}i`;
                    } else if (d === 1 && b !== 1) {
                        e = e + 1;
                        Z = `\\(z = ${a}+${b}i(${c}+i)+${e}i\\)`;
                        Detail = `\\(z = ${a}+${b}i(${c}+i)+${e}i = ${a}+${b}i \\times {${c}}+${b}i \\times {i+${e}i} = ${a}+${b * c}i+${b * d}\\times {i^{2}}+${e}i \\)`;
						Detailb = `\\(= ${a}+${b * c}i-${b * d}+${e}i = ${a}-${b * d}+i(${b * c}+${e}) =${a-b * d}+${b * c + e}i\\)`;
                        x = a - b * d;
                        y = b * c + e;
                        verifie = `${x}+${y}i`;
                    } else if (b === 1 && d === 1) {
                        a = a+1;
						e = e + 1;
                        Z = `\\(z = ${a}+i(${c}+i)+${e}i\\)`;
                        Detail = `\\(z = ${a}+i(${c}+i)+${e}i = ${a}+{i} \\times {${c}}+{i} \\times {i}+${e}i = ${a}+${c}i+{i^{2}}+${e}i\\)`;
						Detailb = `\\(= ${a}+${c}i-1+${e}i = ${a}-1+i(${c}+${e}) = ${a-1}+${c + e}i\\)`;
                        x = a - 1;
                        y = c + e;
                        verifie = `${x}+${y}i`;
                    } else {
                        e = e + 1;
                        Z = `\\(z = ${a}+${b}i(${c}+${d}i)+${e}i\\)`;
                        Detail = `\\(z = ${a}+${b}i(${c}+${d}i)+${e}i = ${a}+${b}i \\times {${c}}+${b}i \\times {${d}i+${e}i} = ${a}+${b * c}i+${b * d}\\times {i^{2}}+${e}i\\)`;
						Detailb = `\\(= ${a}-${b * d}+i(${b * c}+${e}) =${a-b * d}+${b * c + e}i\\)`;
                        x = a - b * d;
                        y = b * c + e;
                        verifie = `${x}+${y}i`;
                    }
            } else if (B === 2) {
                d = d+1;
				e = e+1;
				c = c+1;
				Z = `\\(z = ${a}+i(${c}-${d}i)-${e}i\\)`;
				if (c-e <0) {
				    Detail =(c - e === -1) ? `\\(z = ${a}+i(${c}-${d}i)-${e}i = ${a}+i \\times {${c}}-i \\times ${d}i-${e}i = ${a}+i-${d}\\times {i^{2}}-${e}i = ${a}+i-${d}\\times {(-1)}-${e}i = ${a}+i+${d}-${e}i \\)` : `\\(z = ${a}+i(${c}-${d}i)-${e}i = ${a}+i \\times {${c}}-i \\times ${d}i-${e}i = ${a}+i-${d}\\times {i^{2}}-${e}i = ${a}+i-${d}\\times {(-1)}-${e}i = ${a}+i+${d}-${e}i \\)`;
					Detailb =(c - e === -1) ? `\\(= ${a}+${d}+i(${c}-${e}) =${a+d}+(${c - e})i = ${a+d}-i\\)` : `\\( = ${a}+${d}+i(${c}-${e}) =${a+d}+(${c - e})i = ${a+d}-${-(c - e)}i\\)`;
					x = a + d;
                    y = -(c-e);
                    verifie =(c - e === -1) ? x + "-" + "i" : x + "-" + y + "i"
                } else {
                    if (c-e ===0) {
					    Detail = `\\(z = ${a}+i(${c}-${d}i)-${e}i = ${a}+i \\times {${c}}-i \\times ${d}i-${e}i = ${a}+${c}i-${d}\\times {i^{2}}-${e}i = ${a}+${c}i-${d}\\times {(-1)}-${e}i \\)`;
						Detailb = `\\(= ${a}+${c}i+${d}-${e}i= ${a}+${d}+i(${c}-${e})= ${a+d}+i\\times ${c-e} = ${a+d}\\)`;
						x = a + d;
						y = b * c + e;
						verifie = x;
					} else {
					    Detail = (c - e === 1) ? `\\(z = ${a}+i(${c}-${d}i)-${e}i = ${a}+i \\times {${c}}-i \\times ${d}i-${e}i = ${a}+${c}i-${d}\\times {i^{2}}-${e}i \\)` : `\\(z = ${a}+i(${c}-${d}i)-${e}i = ${a}+i \\times {${c}}-i \\times ${d}i-${e}i = ${a}+${c}i-${d}\\times {i^{2}}-${e}i = ${a}+${c}i-${d}\\times {(-1)}-${e}i \\)`;
						Detailb = (c - e === 1) ? `\\( = ${a}+${c}i-${d}\\times {(-1)}-${e}i = ${a}+${c}i+${d}-${e}i = ${a}+${d}+i(${c}-${e}) = ${a+d}+i\\)` : `\\(= ${a}+${c}i+${d}-${e}i = ${a}+${d}+i(${c}-${e}) = ${a+d}+${c - e}i\\)`;
						x = a + d;
						y = c - e;
						verifie = (c - e === 1) ? x + "+" + "i" : x + "+" + y + "i";
					}
                }
			} else if (B === 3) {
                a = a+1;
				e = e+1;
				c = c+1;
				Z = `\\(z = ${a}i(${b}-i)-${c}i(${d}+${e}i)\\)`;
				v = a * b - c * d;
				if (v <0) {
				    Detail =(v === -1) ? `\\(z = ${a}i(${b}-i)-${c}i(${d}+${e}i) = ${a}i \\times ${b} - ${a}i \\times i - ${c}i \\times ${d} - ${c}i \\times ${e}i \\)` : `\\(z = ${a}i(${b}-i)-${c}i(${d}+${e}i) = ${a}i \\times ${b} - ${a}i \\times i - ${c}i \\times ${d} - ${c}i \\times ${e}i = ${a*b}i-${a}\\times {i^{2}}-${c*d}i - ${c*e}\\times {i^{2}} \\)`;
					Detailb =(v === -1) ? `\\( = ${a*b}i-${a}\\times {i^{2}}-${c*d}i - ${c*e}\\times {i^{2}} = ${a*b}i-${a}\\times (-1) - ${c*d}i - ${c*e}\\times (-1) = ${a*b}i+${a}-${c*d}i + ${c*e}= ${a}+${c*e}+i(${a*b}-${c*d}) =${a+c*e}+i(${a*b - c*d}) \\times i = ${a+c*e}-i\\)` : `\\(= ${a*b}i-${a}\\times (-1) - ${c*d}i - ${c*e}\\times (-1) = ${a*b}i+${a}-${c*d}i + ${c*e} = ${a}+${c*e}+i(${a*b}-${c*d}) =${a+c*e}+(${a*b - c*d}) \\times i = ${a+c*e}-${-(a*b - c*d)}i\\)`;
					x = a + c * e;
                    y = -(a*b - c * d);
                    verifie = (v === -1) ? x + "-" + "i" : x + "-" + y + "i";
                } else {
                    if (v ===0) {
					    enoncexercice();
					} else {
					    Detail = (v === 1) ? `\\(z = ${a}i(${b}-i)-${c}i(${d}+${e}i) = ${a}i \\times ${b} - ${a}i \\times i - ${c}i \\times ${d} - ${c}i \\times ${e}i = ${a*b}i-${a}\\times {i^{2}}-${c*d}i - ${c*e}\\times {i^{2}} \\)` : `\\(z = ${a}i(${b}-i)-${c}i(${d}+${e}i) = ${a}i \\times ${b} - ${a}i \\times i - ${c}i \\times ${d} - ${c}i \\times ${e}i = ${a*b}i-${a}\\times {i^{2}}-${c*d}i - ${c*e}\\times {i^{2}}\\)`;
						Detailb = (v === 1) ? `\\(= ${a*b}i-${a}\\times (-1) - ${c*d}i - ${c*e}\\times (-1) = ${a*b}i+${a}-${c*d}i + ${c*e}= ${a}+${c*e}+i(${a*b}-${c*d}) =${a+c*e}+i(${a*b - c*d}) \\times i = ${a+c*e}+i\\)` : `\\(= ${a*b}i-${a}\\times (-1) - ${c*d}i - ${c*e}\\times (-1) = ${a*b}i+${a}-${c*d}i + ${c*e}= ${a}+${c*e}+i(${a*b}-${c*d}) =${a+c*e}+${a*b - c*d}i\\)`;
						x = a + c * e;
						y = a*b - c * d;
						verifie = (v === 1) ? x + "+" + "i" : x + "+" + y + "i";
					}
                }

			} else if (B === 4) {
                b = b+1;
				d = d+1;
				Z = `\\(z = (${a}+${b}i)(${c}+${d}i)\\)`;
				v = a * d + b * c;
				if (v >0) {
				    Detail =(v === 1) ? `\\(z = (${a}+${b}i)(${c}+${d}i) = ${a} \\times ${c} + ${a} \\times ${d}i + ${b}i \\times ${c} + ${b}i \\times ${d}i  \\)` : `\\(z = (${a}+${b}i)(${c}+${d}i) = ${a} \\times ${c} + ${a} \\times ${d}i + ${b}i \\times ${c} + ${b}i \\times ${d}i = ${a*c}+${a*d}i+${b*c}i+ ${b*d} \\times {i^{2}} = ${a*c}+${a*d}i+${b*c}i+ ${b*d} \\times (-1) \\)`;
					Detailb =(v === 1) ? `\\( =  ${a*c}+${a*d}i+${b*c}i+ ${b*d} \\times {i^{2}} = ${a*c}+${a*d}i+${b*c}i+ ${b*d} \\times (-1) = ${a*c}+${a*d}i+${b*c}i- ${b*d} = ${a*c}-${b*d}+i(${a*d}+${b*c}) = ${a*c-b*d}+i\\)` : `\\(= ${a*c}+${a*d}i+${b*c}i- ${b*d} = ${a*c}-${b*d}+i(${a*d}+${b*c}) = ${a*c-b*d}+(${a*d + b*c}) \\times i = ${a*c-b*d}+${a*d + b*c}i\\)`;
					x = a * c - b * d;
                    y = a * d + b * c;
                    verifie =(v === 1) ? x + "+" + "i" : x + "+" + y + "i";
                } else {
                    Detail = `\\(z = (${a}+${b}i)(${c}+${d}i) = ${a} \\times ${c} + ${a} \\times ${d}i + ${b}i \\times ${c} + ${b}i \\times ${d}i = ${a*c}+${a*d}i+${b*c}i+ ${b*d} \\times {i^{2}} \\)`;
					Detailb = `\\( = ${a*c}+${a*d}i+${b*c}i+ ${b*d} \\times (-1) = ${a*c}+${a*d}i+${b*c}i- ${b*d} = ${a*c}-${b*d}+i(${a*d}+${b*c}) =${a*c-b*d}+${a*d + b*c} \\times i = ${a*c-b*d}\\)`;
					x = a * c - b * d;
					y = a * d + b * c;
					verifie = x + "+" + y + "i";
                }
			} else if (B === 5) {
                b = b+1;
				d = d+1;
				Z = `\\(z = (${a}-${b}i)(${c}-${d}i)\\)`;
				v = - a * d - b * c;
				if (v <0) {
				    Detail =(v === -1) ? `\\(z = (${a}-${b}i)(${c}-${d}i) = ${a} \\times ${c} - ${a} \\times ${d}i - ${b}i \\times ${c} + ${b}i \\times ${d}i = ${a*c}-${a*d}i-${b*c}i+ ${b*d} \\times {i^{2}} = ${a*c}-${a*d}i-${b*c}i+ ${b*d} \\times (-1) \\)` : `\\(z = (${a}-${b}i)(${c}-${d}i) = ${a} \\times ${c} - ${a} \\times ${d}i - ${b}i \\times ${c} + ${b}i \\times ${d}i = ${a*c}-${a*d}i-${b*c}i+ ${b*d} \\times {i^{2}} = ${a*c}-${a*d}i-${b*c}i+ ${b*d} \\times (-1) \\)`;
					Detailb =(v === -1) ? `\\( = ${a*c}-${a*d}i-${b*c}i- ${b*d} = ${a*c}-${b*d}-i(${a*d}+${b*c}) = ${a*c-b*d}-i\\)` : `\\( = ${a*c}-${a*d}i-${b*c}i- ${b*d} = ${a*c}-${b*d}-i(${a*d}+${b*c}) = ${a*c-b*d}-${a*d+b*c}i\\)`;
					x = a *c - b * d;
                    y = a*d + b*c;
                    verifie = (v === -1) ? x + "-" + "i" : x + "-" + y + "i";
                } else {
                    Detail = `\\(z = (${a}-${b}i)(${c}-${d}i) = ${a} \\times ${c} - ${a} \\times ${d}i - ${b}i \\times ${c} + ${b}i \\times ${d}i = ${a*c}-${a*d}i-${b*c}i+ ${b*d} \\times {i^{2}} = ${a*c}-${a*d}i-${b*c}i+ ${b*d} \\times (-1) \\)`;
					Detailb = `\\( = ${a*c}-${a*d}i-${b*c}i- ${b*d} = ${a*c}-${b*d}-i(${a*d}+${b*c}) = ${a*c}-${b*d}-${a*d+b*c} \\times ${a*d+b*c} = ${a*c-b*d}\\)`;
					x = a *c - b * d;
					y = a*d + b*c;
					verifie = x;
                }
			} else if (B === 6) {
                b = b + 1;
				Z = `\\(z = (${a}+${b}i)^{2}\\)`;
				v = a * a - b * b;
				if (v === 0) {
				    Detail = `\\(z = (${a}+${b}i)^{2} = ${a}^{2} + 2 \\times ${a} \\times ${b}i + (${b}i)^{2} = ${a}^{2} + 2 \\times ${a} \\times ${b}i + ${b}^{2} \\times {i^{2}} = ${a*a}+${2 * a * b}i+${b*b} \\times {(-1)} \\)`;
					Detailb = `\\( = ${a*a}+${2 * a * b}i-${b*b} = ${a*a}-${b*b}+${2 * a * b}i = ${a * a - b * b}+${2 * a * b}i = ${2 * a * b}i\\)`;
					x = a * a - b * b;
					y = 2 * a * b;
					verifie = y + "i";
				} else {
				    Detail = `\\(z = (${a}+${b}i)^{2} = ${a}^{2} + 2 \\times ${a} \\times ${b}i + (${b}i)^{2} = ${a}^{2} + 2 \\times ${a} \\times ${b}i + ${b}^{2} \\times {i^{2}} = ${a*a}+${2 * a * b}i+${b*b} \\times {(-1)} \\)`;
					Detailb = `\\( = ${a*a}+${2 * a * b}i-${b*b} = ${a*a}-${b*b}+${2 * a * b}i = ${a * a - b * b}+${2 * a * b}i\\)`;
					x = a * a - b * b;
					y = 2 * a * b;
					verifie = x + "+" + y + "i";
				}
			} else if (B === 7) {
                b = b + 1;
				Z = `\\(z = (${a}-${b}i)^{2}\\)`;
				v = a * a - b * b;
				if (v === 0) {
				    Detail = `\\(z = (${a}-${b}i)^{2} = ${a}^{2} - 2 \\times ${a} \\times ${b}i + (${b}i)^{2} = ${a}^{2} - 2 \\times ${a} \\times ${b}i + ${b}^{2} \\times {i^{2}} = ${a*a}-${2 * a * b}i+${b*b} \\times {(-1)} \\)`;
					Detailb = `\\(= ${a*a}-${2 * a * b}i-${b*b} = ${a*a}-${b*b}-${2 * a * b}i = ${a * a - b * b}-${2 * a * b}i = -${2 * a * b}i\\)`;
					x = a * a - b * b;
					y = 2 * a * b;
					verifie = -y + "i";
				} else {
				    Detail = `\\(z = (${a}-${b}i)^{2} = ${a}^{2} - 2 \\times ${a} \\times ${b}i + (${b}i)^{2} = ${a}^{2} - 2 \\times ${a} \\times ${b}i + ${b}^{2} \\times {i^{2}} = ${a*a}-${2 * a * b}i+${b*b} \\times {(-1)} \\)`;
					Detailb = `\\( = ${a*a}-${2 * a * b}i-${b*b} = ${a*a}-${b*b}-${2 * a * b}i = ${a * a - b * b}-${2 * a * b}i\\)`;
					x = a * a - b * b;
					y = 2 * a * b;
					verifie = x + "-" + y + "i";
				}
			} else if (B === 8) {
                b = b+1;
				d = d+1;
				Z = `\\(z = \\frac {${a}+${b}i}{${c}+${d}i}\\)`;
				v = - a * d + b * c;
				if (v <0) {
				    numreelav = a*c+b*d;
					numimgav = -(- a * d + b * c);
					denoav = c*c + d*d;
					sreel = simplifierFractionCalculation(numreelav, denoav);
					simag = simplifierFractionCalculation(numimgav, denoav);
					numreel = sreel[0];
					numimg = simag[0];
					denoreel = sreel[1];
					denoimg = simag[1];
					partireel = (numreel%denoreel===0) ? numreel/denoreel : "\\frac{{"+numreel+"}}{{"+denoreel+"}}";
					partimaginaire = (numimg%denoimg===0) ? numimg/denoimg : "\\frac{{"+numimg+"}}{{"+denoimg+"}}";
					Detail =(v === -1) ? `\\(z = \\frac {${a}+${b}i}{${c}+${d}i} = \\frac {(${a}+${b}i)(${c}-${d}i)}{(${c}+${d}i)(${c}-${d}i)} = \\frac {${a} \\times ${c} - ${a} \\times ${d}i + ${b}i \\times ${c} - ${b}i \\times ${d}i}{${c}^{2}+${d}^{2}} = \\frac {${a*c}-${a*d}i+${b*c}i- ${b*d} \\times {i^{2}}}{${c*c}+${d*d}} = \\frac {${a*c}-${a*d}i+${b*c}i- ${b*d} \\times (-1)}{${c*c+d*d}} \\)` : `\\(z = \\frac {${a}+${b}i}{${c}+${d}i} = \\frac {(${a}+${b}i)(${c}-${d}i)}{(${c}+${d}i)(${c}-${d}i)} = \\frac {${a} \\times ${c} - ${a} \\times ${d}i + ${b}i \\times ${c} - ${b}i \\times ${d}i}{${c}^{2}+${d}^{2}} = \\frac {${a*c}-${a*d}i+${b*c}i- ${b*d} \\times {i^{2}}}{${c*c}+${d*d}} = \\frac {${a*c}-${a*d}i+${b*c}i- ${b*d} \\times (-1)}{${c*c+d*d}} \\)`;
					Detailb =(v === -1) ? `\\( = \\frac {${a*c}-${a*d}i+${b*c}i+ ${b*d}}{${c*c+d*d}} = \\frac {${a*c}+${b*d}+i(-${a*d}+${b*c})}{${c*c+d*d}} = \\frac{${a*c+b*d}-i}{${c*c+d*d}} = \\frac{${numreel}}{${denoreel}} - \\frac{i}{${denoimg}} = ${partireel} - ${partimaginaire}i\\)` : `\\( = \\frac {${a*c}-${a*d}i+${b*c}i+ ${b*d}}{${c*c+d*d}} = \\frac {${a*c}+${b*d}+i(-${a*d}+${b*c})}{${c*c+d*d}} = \\frac{${a*c+b*d}-${-(-a*d+b*c)}i}{${c*c+d*d}} = \\frac{${a*c+b*d}}{${c*c+d*d}} - \\frac{${-(-a*d+b*c)}i}{${c*c+d*d}} = ${partireel} - ${partimaginaire}i\\)`;
					x = (numreel%denoreel===0) ? numreel/denoreel : "("+numreel+"/"+denoreel+")";
                    y = (numimg%denoimg===0) ? numimg/denoimg : "("+numimg+"/"+denoimg+")";
                    verifie = (v === -1) ? x + "-" +"i/"+denoimg : x + "-" + y+"i";
                } else if (v >0) {
                    numreelav = a*c+b*d;
					numimgav = - a * d + b * c;
					denoav = c*c + d*d;
					sreel = simplifierFractionCalculation(numreelav, denoav);
					simag = simplifierFractionCalculation(numimgav, denoav);
					numreel = sreel[0];
					numimg = simag[0];
					denoreel = sreel[1];
					denoimg = simag[1];
					partireel = (numreel%denoreel===0) ? numreel/denoreel : "\\frac{{"+numreel+"}}{{"+denoreel+"}}";
					partimaginaire = (numimg%denoimg===0) ? numimg/denoimg : "\\frac{{"+numimg+"}}{{"+denoimg+"}}";
					Detail =(v === 1) ? `\\(z = \\frac {${a}+${b}i}{${c}+${d}i} = \\frac {(${a}+${b}i)(${c}-${d}i)}{(${c}+${d}i)(${c}-${d}i)} = \\frac {${a} \\times ${c} - ${a} \\times ${d}i + ${b}i \\times ${c} - ${b}i \\times ${d}i}{${c}^{2}+${d}^{2}} = \\frac {${a*c}-${a*d}i+${b*c}i- ${b*d} \\times {i^{2}}}{${c*c}+${d*d}} = \\frac {${a*c}-${a*d}i+${b*c}i- ${b*d} \\times (-1)}{${c*c+d*d}} \\)` : `\\(z = \\frac {${a}+${b}i}{${c}+${d}i} = \\frac {(${a}+${b}i)(${c}-${d}i)}{(${c}+${d}i)(${c}-${d}i)} = \\frac {${a} \\times ${c} - ${a} \\times ${d}i + ${b}i \\times ${c} - ${b}i \\times ${d}i}{${c}^{2}+${d}^{2}} = \\frac {${a*c}-${a*d}i+${b*c}i- ${b*d} \\times {i^{2}}}{${c*c}+${d*d}} = \\frac {${a*c}-${a*d}i+${b*c}i- ${b*d} \\times (-1)}{${c*c+d*d}} \\)`;
					Detailb =(v === 1) ? `\\( = \\frac {${a*c}-${a*d}i+${b*c}i+ ${b*d}}{${c*c+d*d}} = \\frac {${a*c}+${b*d}+i(-${a*d}+${b*c})}{${c*c+d*d}} = \\frac{${a*c+b*d}+i}{${c*c+d*d}} = \\frac{${a*c+b*d}}{${c*c+d*d}} + \\frac{i}{${c*c+d*d}} = \\frac{${numreel}}{${denoreel}} + \\frac{i}{${denoimg}} = ${partireel} + ${partimaginaire}i\\)` : `\\( = \\frac {${a*c}-${a*d}i+${b*c}i+ ${b*d}}{${c*c+d*d}} = \\frac {${a*c}+${b*d}+i(-${a*d}+${b*c})}{${c*c+d*d}} = \\frac{${a*c+b*d}+${-a*d+b*c}i}{${c*c+d*d}} = \\frac{${a*c+b*d}}{${c*c+d*d}} + \\frac{${-a*d+b*c}i}{${c*c+d*d}} = ${partireel} + ${partimaginaire}i\\)`;
					x = (numreel%denoreel===0) ? numreel/denoreel : "("+numreel+"/"+denoreel+")";
                    y = (numimg%denoimg===0) ? numimg/denoimg : "("+numimg+"/"+denoimg+")";
                    verifie = (v === 1) ? x + "+" +"(i/"+denoimg+")" : x + "+" + y+"i";
                } else {
                    enoncexercice();
                }
			} else {
                b = b+1;
				d = d+1;
				Z = `\\(z = \\frac {${a}-${b}i}{${-c}+${d}i}\\)`;
				v = - a * d + b * c;
				if (v <0) {
				    numreelav = -(-a*c-b*d);
					numimgav = -(- a * d + b * c);
					denoav = c*c + d*d;
					sreel = simplifierFractionCalculation(numreelav, denoav);
					simag = simplifierFractionCalculation(numimgav, denoav);
					numreel = sreel[0];
					numimg = simag[0];
					denoreel = sreel[1];
					denoimg = simag[1];
					partireel = (numreel%denoreel===0) ? -numreel/denoreel : "\\frac{{-"+numreel+"}}{{"+denoreel+"}}";
					partimaginaire = (numimg%denoimg===0) ? numimg/denoimg : "\\frac{{"+numimg+"}}{{"+denoimg+"}}";
					Detail =(v === -1) ? `\\(z = \\frac {${a}-${b}i}{${-c}+${d}i} = \\frac {(${a}-${b}i)(${-c}-${d}i)}{(${-c}+${d}i)(${-c}-${d}i)} = \\frac {${-a} \\times ${c} - ${a} \\times ${d}i + ${b}i \\times ${c} + ${b}i \\times ${d}i}{(${-c})^{2}+${d}^{2}} = \\frac {${-a*c}-${a*d}i+${b*c}i+ ${b*d} \\times {i^{2}}}{${c*c}+${d*d}} = \\frac {${-a*c}-${a*d}i+${b*c}i+ ${b*d} \\times (-1)}{${c*c+d*d}} \\)` : `\\(z = \\frac {${a}-${b}i}{${-c}+${d}i} = \\frac {(${a}-${b}i)(${-c}-${d}i)}{(${-c}+${d}i)(${-c}-${d}i)} = \\frac {${-a} \\times ${c} - ${a} \\times ${d}i + ${b}i \\times ${c} + ${b}i \\times ${d}i}{(${-c})^{2}+${d}^{2}} = \\frac {${-a*c}-${a*d}i+${b*c}i+ ${b*d} \\times {i^{2}}}{${c*c}+${d*d}} = \\frac {${-a*c}-${a*d}i+${b*c}i+ ${b*d} \\times (-1)}{${c*c+d*d}} \\)`;
					Detailb =(v === -1) ? `\\( = \\frac {${-a*c}-${a*d}i+${b*c}i- ${b*d}}{${c*c+d*d}} = \\frac {${-a*c}-${b*d}+i(-${a*d}+${b*c})}{${c*c+d*d}} = \\frac{${-a*c-b*d}-i}{${c*c+d*d}} = \\frac{${-a*c-b*d}}{${c*c+d*d}} - \\frac{i}{${c*c+d*d}} = ${partireel} - ${partimaginaire}i\\)` : `\\( = \\frac {${-a*c}-${a*d}i+${b*c}i- ${b*d}}{${c*c+d*d}} = \\frac {${-a*c}-${b*d}+i(-${a*d}+${b*c})}{${c*c+d*d}}  = \\frac{${-a*c-b*d}-${-(-a*d+b*c)}i}{${c*c+d*d}} = \\frac{${-a*c-b*d}}{${c*c+d*d}} - \\frac{${-(-a*d+b*c)}i}{${c*c+d*d}} = ${partireel} - ${partimaginaire}i\\)`;
					x = (numreel%denoreel===0) ? -numreel/denoreel : "(-"+numreel+"/"+denoreel+")";
                    y = (numimg%denoimg===0) ? numimg/denoimg : "("+numimg+"/"+denoimg+")";
                    verifie = (v === -1) ? x + "-" +"(1/"+denoimg+")i" : x + "-" + y +"i";
                } else if (v >0) {
                    numreelav = -(-a*c-b*d);
					numimgav = - a * d + b * c;
					denoav = c*c + d*d;
					sreel = simplifierFractionCalculation(numreelav, denoav);
					simag = simplifierFractionCalculation(numimgav, denoav);
					numreel = sreel[0];
					numimg = simag[0];
					denoreel = sreel[1];
					denoimg = simag[1];
					partireel = (numreel%denoreel===0) ? -numreel/denoreel : "\\frac{{-"+numreel+"}}{{"+denoreel+"}}";
					partimaginaire = (numimg%denoimg===0) ? numimg/denoimg : "\\frac{{"+numimg+"}}{{"+denoimg+"}}";
					Detail =(v === 1) ? `\\(z = \\frac {${a}-${b}i}{${-c}+${d}i} = \\frac {(${a}-${b}i)(${-c}-${d}i)}{(${-c}+${d}i)(${-c}-${d}i)} = \\frac {${-a} \\times ${c} - ${a} \\times ${d}i + ${b}i \\times ${c} + ${b}i \\times ${d}i}{(${-c})^{2}+${d}^{2}} = \\frac {${-a*c}-${a*d}i+${b*c}i+ ${b*d} \\times {i^{2}}}{${c*c}+${d*d}} = \\frac {${-a*c}-${a*d}i+${b*c}i+ ${b*d} \\times (-1)}{${c*c+d*d}} \\)` : `\\(z = \\frac {${a}-${b}i}{${-c}+${d}i} = \\frac {(${a}-${b}i)(${-c}-${d}i)}{(${-c}+${d}i)(${-c}-${d}i)} = \\frac {${-a} \\times ${c} - ${a} \\times ${d}i + ${b}i \\times ${c} + ${b}i \\times ${d}i}{(${-c})^{2}+${d}^{2}} = \\frac {${-a*c}-${a*d}i+${b*c}i+ ${b*d} \\times {i^{2}}}{${c*c}+${d*d}} = \\frac {${-a*c}-${a*d}i+${b*c}i+ ${b*d} \\times (-1)}{${c*c+d*d}} \\)`;
					Detailb =(v === 1) ? `\\( = \\frac {${-a*c}-${a*d}i+${b*c}i- ${b*d}}{${c*c+d*d}} = \\frac {${-a*c}-${b*d}+i(-${a*d}+${b*c})}{${c*c+d*d}} = \\frac{${-a*c-b*d}+i}{${c*c+d*d}} = \\frac{${-a*c-b*d}}{${c*c+d*d}} + \\frac{i}{${c*c+d*d}} = ${partireel} + ${partimaginaire}i\\)` : `\\( = \\frac {${-a*c}-${a*d}i+${b*c}i- ${b*d}}{${c*c+d*d}} = \\frac {${-a*c}-${b*d}+i(-${a*d}+${b*c})}{${c*c+d*d}}  = \\frac{${-a*c-b*d}+${-a*d+b*c}i}{${c*c+d*d}} = \\frac{${-a*c-b*d}}{${c*c+d*d}} + \\frac{${-a*d+b*c}i}{${c*c+d*d}} =  ${partireel} + ${partimaginaire}i\\)`;
					x = (numreel%denoreel===0) ? -numreel/denoreel : "(-"+numreel+"/"+denoreel+")";
                    y = (numimg%denoimg===0) ? numimg/denoimg : "("+numimg+"/"+denoimg+")";
					verifie = (v === 1) ? x + "+" +"(1/"+denoimg+")i" : x + "+" + y+"i";
                } else {
					enoncexercice();
                }
			}
            expression = Z;
            resultat = Detail;
			resultatb = Detailb;
            reponse = verifie;
            document.getElementById("expression").innerHTML = expression;
            document.getElementById("correction").innerHTML = "";
            document.getElementById("reponse").innerHTML = "";
            MathJax.typeset();
        }
		function simplifierFractionCalculation(nume, denom) {

            var result = "";
            if (denom !== 0) {

                function pgcd(x, y) {
                    if (y === 0) {
                        return x;
                    } else {
                        return pgcd(y, x % y);
                    }
                }

                var pgcdResult = pgcd(nume, denom);

                if (pgcdResult !== 1) {
                    nume = nume / pgcdResult;
                    denom = denom / pgcdResult;
                }
                result = (nume%denom===0) ? nume/denom : "\\frac{${nume}}{${denom}}";
            }
            return [nume, denom, result];
        }

        function checkAnswer() {
            var userAnswer = document.getElementById("userAnswer").value;
            if (userAnswer === reponse) {
                document.getElementById("reponse").innerHTML = "<span style='color: green; font-weight: bold;'>Bonne réponse !</span>";
            } else {
                document.getElementById("reponse").innerHTML = "<span style='color: red; font-weight: bold;'>Mauvaise réponse !</span>";
                document.getElementById("correction").innerHTML = "<p>Calculons : </p>" +
                    "<p>" + resultat + "</p>" + "<p>" + resultatb + "</p>";
            }
            MathJax.typeset();
        }

        function changeStatement() {
            enoncexercice();
        }
        enoncexercice();
    </script>
</body>

</html>
